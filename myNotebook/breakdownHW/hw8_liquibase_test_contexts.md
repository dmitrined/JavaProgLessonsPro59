### Объяснение тестов LiquibaseIT и LiquibaseNoProfileIT

Эти тесты созданы для проверки того, как **Liquibase** обрабатывает **контексты (contexts)** в зависимости от активного Spring-профиля.

#### 1. Подготовка в Liquibase (Changelog)
В файле `008-seed-test-data-only-test.xml` определен `changeSet`, который содержит тестовые данные (Toyota Camry и BMW M5). 
Ключевым моментом является атрибут **`context="test"`**:
```xml
<changeSet id="008-seed-test-data" author="Dmitri Nedioglo" context="test">
    <!-- вставка данных -->
</changeSet>
```
Это означает, что данный `changeSet` будет выполнен **только если** Liquibase запущен с контекстом `test`.

#### 2. Настройка Spring Boot
В `application.properties` (основной профиль) указано:
`spring.liquibase.contexts=default`
Это говорит Liquibase выполнять только те изменения, у которых контекст не задан или равен `default`.

В `application-test.properties` (профиль `test`) предполагается переопределение этого параметра (хотя в текущем коде оно может быть закомментировано или управляться автоматически через профили), чтобы разрешить выполнение контекста `test`.

---

#### 3. Разбор тестов

##### **LiquibaseIT**
Этот тест проверяет **успешную вставку** данных при активном профиле.
- **Аннотация:** `@ActiveProfiles("test")`
- **Суть:** Когда Spring запускает этот тест, он активирует профиль `test`. Это заставляет Liquibase подтянуть настройки из `application-test.properties` и выполнить `changeSet` с `context="test"`.
- **Проверка:** `assertTrue(toyotaExists, ...)` — мы ожидаем, что машины из 008-го файла **существуют** в базе.

##### **LiquibaseNoProfileIT**
Этот тест проверяет **отсутствие** данных без активации профиля.
- **Аннотация:** Отсутствует `@ActiveProfiles` (используется профиль по умолчанию).
- **Суть:** Spring запускается с настройками из `application.properties`, где `spring.liquibase.contexts=default`. Liquibase видит `changeSet` с `context="test"` и **игнорирует** его, так как текущий контекст — `default`.
- **Проверка:** `assertFalse(toyotaExists, ...)` — мы ожидаем, что машин из 008-го файла **нет** в базе.

---

#### 4. В чем разница?

| Характеристика | LiquibaseIT | LiquibaseNoProfileIT |
| :--- | :--- | :--- |
| **Spring Профиль** | `test` | `default` |
| **Контекст Liquibase** | `test` | `default` |
| **Выполнение 008-го скрипта** | Да | Нет |
| **Результат в БД** | Тестовые данные созданы | Тестовые данные отсутствуют |
| **Цель теста** | Проверить, что миграции для тестов работают | Проверить, что тестовые данные не попадают в "прод" или обычный запуск |

Таким образом, мы протестировали механизм разделения данных: нужные для тестов данные загружаются только тогда, когда мы явно указываем, что находимся в тестовом окружении.
